# üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è calculated_volume

## üéØ –ü—Ä–æ—Å—Ç–∞—è —Å—Ö–µ–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –§–û–†–ú–ê –°–û–ó–î–ê–ù–ò–Ø –¢–û–í–ê–†–ê                         ‚îÇ
‚îÇ                    (ProductResource.php)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ –í—ã–±–∏—Ä–∞–µ—Ç–µ       ‚îÇ
                    ‚îÇ –®–∞–±–ª–æ–Ω (‚Ññ1)     ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ afterStateUpdated‚îÇ (—Å—Ç—Ä–æ–∫–∞ 123)
                    ‚îÇ - –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è  ‚îÇ
                    ‚îÇ   –ø–æ–ª—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ –ü–û–õ–Ø –ê–¢–†–ò–ë–£–¢–û–í –ì–ï–ù–ï–†–ò–†–£–Æ–¢–°–Ø         ‚îÇ
        ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
        ‚îÇ attribute_length    [TextInput]      ‚îÇ
        ‚îÇ attribute_width     [TextInput]      ‚îÇ
        ‚îÇ attribute_height    [TextInput]      ‚îÇ
        ‚îÇ calculated_volume   [TextInput, disabled] ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ –í–´ –í–í–û–î–ò–¢–ï –ó–ù–ê–ß–ï–ù–ò–Ø          ‚îÇ
            ‚îÇ length: 2000                 ‚îÇ
            ‚îÇ width: 100                   ‚îÇ
            ‚îÇ height: 25                   ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ live onBlur     ‚îÇ (—Å—Ç—Ä–æ–∫–∞ 268)
                    ‚îÇ afterStateUpdated‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ –°–û–ë–ò–†–ê–Æ–¢–°–Ø NUMERIC –ê–¢–†–ò–ë–£–¢–´                 ‚îÇ
        ‚îÇ {                                           ‚îÇ
        ‚îÇ   "length": 2000,                           ‚îÇ
        ‚îÇ   "width": 100,                             ‚îÇ
        ‚îÇ   "height": 25                              ‚îÇ
        ‚îÇ }                                           ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ –í–´–ó–´–í–ê–ï–¢–°–Ø testFormula()                    ‚îÇ
        ‚îÇ (ProductTemplate.php, —Å—Ç—Ä–æ–∫–∞ 68)           ‚îÇ
        ‚îÇ                                             ‚îÇ
        ‚îÇ –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:                             ‚îÇ
        ‚îÇ   –§–æ—Ä–º—É–ª–∞: "length * width * height / 1M"  ‚îÇ
        ‚îÇ   –ê—Ç—Ä–∏–±—É—Ç—ã: {length:2000, width:100, ...}  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ –í–ù–£–¢–†–ò testFormula():                       ‚îÇ
        ‚îÇ 1. –ò–∑–≤–ª–µ—á—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: [length, width, h] ‚îÇ
        ‚îÇ 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã       ‚îÇ
        ‚îÇ 3. –ó–∞–º–µ–Ω–∏—Ç—å: "2000 * 100 * 25 / 1M"       ‚îÇ
        ‚îÇ 4. –í—ã—á–∏—Å–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:                   ‚îÇ
        ‚îÇ    5000000 / 1000000 = 5                   ‚îÇ
        ‚îÇ 5. –í–µ—Ä–Ω—É—Ç—å: {success:true, result:5}      ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ –†–ï–ó–£–õ–¨–¢–ê–¢ –ü–û–î–°–¢–ê–í–õ–Ø–ï–¢–°–Ø –í –§–û–†–ú–£            ‚îÇ
        ‚îÇ                                             ‚îÇ
        ‚îÇ calculated_volume: 5.0000                  ‚îÇ
        ‚îÇ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ disabled –ø–æ–ª–µ)             ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚îÇ –í–´ –ù–ê–ñ–ò–ú–ê–ï–¢–ï –°–û–•–†–ê–ù–ò–¢–¨       ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ CreateProduct::                             ‚îÇ
        ‚îÇ mutateFormDataBeforeCreate()                ‚îÇ
        ‚îÇ (CreateProduct.php, —Å—Ç—Ä–æ–∫–∞ 17)             ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ –§–ò–ù–ê–õ–¨–ù–´–ô –†–ê–°–ß–ï–¢ –ò –ü–û–î–ì–û–¢–û–í–ö–ê –î–ê–ù–ù–´–•       ‚îÇ
        ‚îÇ 1. –°–æ–±—Ä–∞—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ attribute_X         ‚îÇ
        ‚îÇ 2. –í—ã–∑–≤–∞—Ç—å testFormula() –µ—â—ë —Ä–∞–∑           ‚îÇ
        ‚îÇ 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å data['calculated_volume'] = 5‚îÇ
        ‚îÇ 4. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞            ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ –°–û–•–†–ê–ù–ï–ù–ò–ï –í –ë–î                             ‚îÇ
        ‚îÇ                                             ‚îÇ
        ‚îÇ INSERT INTO products (                      ‚îÇ
        ‚îÇ   product_template_id: 1,                   ‚îÇ
        ‚îÇ   name: "–î–æ—Å–∫–∞: 2000 x 100 x 25",         ‚îÇ
        ‚îÇ   attributes: {                            ‚îÇ
        ‚îÇ     "length": 2000,                        ‚îÇ
        ‚îÇ     "width": 100,                          ‚îÇ
        ‚îÇ     "height": 25                           ‚îÇ
        ‚îÇ   },                                        ‚îÇ
        ‚îÇ   calculated_volume: 5.0000,  ‚Üê –°–û–•–†–ê–ù–ï–ù–û  ‚îÇ
        ‚îÇ   quantity: 100                            ‚îÇ
        ‚îÇ )                                           ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å –∫–æ–¥–æ–º

### –®–∞–≥ 1: –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ (ProductResource.php:123)
```php
Select::make('product_template_id')
    ->live(onBlur: true)
    ->afterStateUpdated(function (Set $set, Get $get) {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã —à–∞–±–ª–æ–Ω–∞
        $template = ProductTemplate::find($get('product_template_id'));
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ–ª—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞
        foreach ($template->attributes as $attribute) {
            $set("attribute_{$attribute->variable}", null);
        }
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        $set('calculated_volume', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏...');
    })
```

### –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (ProductResource.php:268)
```php
TextInput::make($fieldName) // –Ω–∞–ø—Ä–∏–º–µ—Ä: attribute_length
    ->live(onBlur: true)
    ->afterStateUpdated(function (Set $set, Get $get) use ($template) {
        // –°–æ–±–∏—Ä–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã
        $attributes = [];
        foreach ($get() as $key => $value) {
            if (str_starts_with($key, 'attribute_') && $value !== null) {
                $attributeName = str_replace('attribute_', '', $key);
                $attributes[$attributeName] = $value;
            }
        }
        
        // –í—ã—á–∏—Å–ª—è–µ–º –æ–±—ä–µ–º
        $testResult = $template->testFormula($attributes);
        
        if ($testResult['success']) {
            $set('calculated_volume', $testResult['result']); // 5.0000
        }
    })
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (CreateProduct.php:59)
```php
protected function mutateFormDataBeforeCreate(array $data): array
{
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã
    $attributes = [];
    foreach ($data as $key => $value) {
        if (str_starts_with($key, 'attribute_')) {
            $attributeName = str_replace('attribute_', '', $key);
            $attributes[$attributeName] = $value;
        }
    }
    $data['attributes'] = $attributes;
    
    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—ä–µ–º (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π)
    $template = ProductTemplate::find($data['product_template_id']);
    $testResult = $template->testFormula($attributes);
    
    if ($testResult['success']) {
        $data['calculated_volume'] = $testResult['result']; // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å: 5.0000
    }
    
    return $data;
    // Product::create($data) ‚Üí –ë–î —Å–æ—Ö—Ä–∞–Ω–∏—Ç calculated_volume
}
```

---

## üìå –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

| –ß—Ç–æ | –ì–¥–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-----|-----|-----------|
| **–í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞** | ProductResource.php:123 | –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ–ª—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ |
| **–í–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–π** | ProductResource.php:250+ (TextInput) | –ó–Ω–∞—á–µ–Ω–∏—è —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ $attributes |
| **Live –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** | ProductResource.php:268 | –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ ‚Üí —Ä–∞—Å—á–µ—Ç ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI |
| **testFormula()** | ProductTemplate.php:68 | –í—ã—á–∏—Å–ª—è–µ—Ç –æ–±—ä–µ–º –ø–æ —Ñ–æ—Ä–º—É–ª–µ |
| **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** | CreateProduct.php:59 | –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç ‚Üí –ë–î |
| **–†–µ–∑—É–ª—å—Ç–∞—Ç** | products —Ç–∞–±–ª–∏—Ü–∞ | calculated_volume = 5.0000 |

---

## üßÆ –í–Ω—É—Ç—Ä–∏ testFormula() (ProductTemplate.php:68)

```
–í–•–û–î:
  –§–æ—Ä–º—É–ª–∞: "length * width * height / 1000000"
  –ê—Ç—Ä–∏–±—É—Ç—ã: {length: 2000, width: 100, height: 25}

–≠–¢–ê–ü 1 - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
  preg_match_all('/[a-zA-Z_][a-zA-Z0-9_]*/', formula)
  –†–µ–∑—É–ª—å—Ç–∞—Ç: ['length', 'width', 'height']

–≠–¢–ê–ü 2 - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã:
  –¢—Ä–µ–±—É–µ–º—ã–µ: [length, width, height]
  –ò–º–µ—é—â–∏–µ—Å—è: {length, width, height}
  ‚úì –í—Å–µ –µ—Å—Ç—å

–≠–¢–ê–ü 3 - –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π:
  preg_replace('/\blength\b/', '2000', formula)
  ‚Üí "2000 * width * height / 1000000"
  ‚Üí "2000 * 100 * height / 1000000"
  ‚Üí "2000 * 100 * 25 / 1000000"

–≠–¢–ê–ü 4 - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ:
  parseExpression("2000 * 100 * 25 / 1000000")
  ‚Üí evaluateExpressionRecursive()
  ‚Üí –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: * / –ø–µ—Ä–µ–¥ + -
  ‚Üí 2000 * 100 = 200000
  ‚Üí 200000 * 25 = 5000000
  ‚Üí 5000000 / 1000000 = 5.0

–í–´–•–û–î:
  {
    success: true,
    error: null,
    result: 5.0
  }
```

---

## üíæ –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

```
PostgreSQL/MySQL
‚îú‚îÄ‚îÄ products
‚îÇ   ‚îú‚îÄ‚îÄ id: 1
‚îÇ   ‚îú‚îÄ‚îÄ name: "–î–æ—Å–∫–∞ 2000x100x25"
‚îÇ   ‚îú‚îÄ‚îÄ product_template_id: 1
‚îÇ   ‚îú‚îÄ‚îÄ quantity: 100
‚îÇ   ‚îú‚îÄ‚îÄ calculated_volume: 5.0000  ‚Üê –ó–î–ï–°–¨
‚îÇ   ‚îú‚îÄ‚îÄ attributes: {
‚îÇ   ‚îÇ   "length": 2000,
‚îÇ   ‚îÇ   "width": 100,
‚îÇ   ‚îÇ   "height": 25
‚îÇ   ‚îÇ}
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ product_templates
    ‚îú‚îÄ‚îÄ id: 1
    ‚îú‚îÄ‚îÄ name: "–î–æ—Å–∫–∞"
    ‚îú‚îÄ‚îÄ formula: "length * width * height / 1000000"
    ‚îî‚îÄ‚îÄ attributes (1:many)
        ‚îú‚îÄ‚îÄ length (variable: "length", is_in_formula: true)
        ‚îú‚îÄ‚îÄ width  (variable: "width", is_in_formula: true)
        ‚îî‚îÄ‚îÄ height (variable: "height", is_in_formula: true)
```

---

## üé¨ –í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

```
–í–†–ï–ú–Ø    –î–ï–ô–°–¢–í–ò–ï                        –†–ï–ó–£–õ–¨–¢–ê–¢
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                        ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
T=0      –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É                   –ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞
T=1      –í—ã–±—Ä–∞—Ç—å —à–∞–±–ª–æ–Ω #1               –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ–ª—è –¥–ª—è length, width, height
T=2      –í–≤–µ—Å—Ç–∏ length: 2000             calculated_volume = "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è..."
T=3      –í–≤–µ—Å—Ç–∏ width: 100               calculated_volume = "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è..."
T=4      –í–≤–µ—Å—Ç–∏ height: 25               calculated_volume = 5.0000 ‚úì
T=5      –ù–∞–∂–∞—Ç—å –°–û–•–†–ê–ù–ò–¢–¨                CreateProduct::mutateFormDataBeforeCreate()
T=6      –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç                calculated_volume = 5.0000
T=7      INSERT –≤ –ë–î                     ‚úì –¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω
```

---

## ‚ö†Ô∏è –ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫

```
–ü–†–û–ë–õ–ï–ú–ê                       –ß–¢–û –ü–†–û–ò–ó–û–ô–î–Å–¢
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. –ù–µ –≤—ã–±—Ä–∞–Ω —à–∞–±–ª–æ–Ω            calculated_volume –æ—Å—Ç–∞—ë—Ç—Å—è null
2. –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –≤—Å–µ –ø–æ–ª—è       "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è: length, width"
3. –ó–Ω–∞—á–µ–Ω–∏–µ > 999999999.9999   "–û–±—ä–µ–º –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ"
4. –ù–µ–≤–µ—Ä–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞            "–û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è: ..."
5. calculated_volume –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞—Å—Ç–∏—Ä—É–µ—Ç—Å—è –∫ decimal(8,4)
```

