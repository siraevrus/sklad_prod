# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–∞ –ø–æ –ª–æ–≥–∏–Ω—É –≤ Filament Admin Panel

## üéØ –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤—Ö–æ–¥–∞ –ø–æ –ª–æ–≥–∏–Ω—É –≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ email –≤ Filament –∞–¥–º–∏–Ω–∫–µ.

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –ö–∞—Å—Ç–æ–º–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞

–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ `app/Filament/Pages/Login.php`:

```php
<?php

namespace App\Filament\Pages;

use App\Models\User;
use Filament\Forms\Components\TextInput;
use Filament\Forms\Form;
use Filament\Pages\Auth\Login as BaseLogin;

class Login extends BaseLogin
{
    public function form(Form $form): Form
    {
        return $form
            ->schema([
                TextInput::make('login')
                    ->label('Email –∏–ª–∏ –ª–æ–≥–∏–Ω')
                    ->required()
                    ->autocomplete()
                    ->autofocus()
                    ->extraInputAttributes(['tabindex' => 1]),

                TextInput::make('password')
                    ->label('–ü–∞—Ä–æ–ª—å')
                    ->password()
                    ->required()
                    ->extraInputAttributes(['tabindex' => 2]),
            ]);
    }

    protected function getCredentialsFromFormData(array $data): array
    {
        $login = $data['login'];
        
        // –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email –∏–ª–∏ username
        $user = User::where('email', $login)
            ->orWhere('username', $login)
            ->first();

        if ($user) {
            return [
                'email' => $user->email,
                'password' => $data['password'],
            ];
        }

        return [
            'email' => $login,
            'password' => $data['password'],
        ];
    }
}
```

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ AdminPanelProvider

–û–±–Ω–æ–≤–ª–µ–Ω `app/Providers/Filament/AdminPanelProvider.php`:

```php
return $panel
    ->default()
    ->id('admin')
    ->path('admin')
    ->login(\App\Filament\Pages\Login::class) // –ö–∞—Å—Ç–æ–º–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
    ->colors([
        'primary' => Color::Blue,
    ])
    // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

### 3. –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü–æ–ª–µ –≤–≤–æ–¥–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç email –∏–ª–∏ –ª–æ–≥–∏–Ω –≤ –ø–æ–ª–µ "Email –∏–ª–∏ –ª–æ–≥–∏–Ω"
2. **–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email –∏–ª–∏ username
3. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–≥–æ email –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–Ω–µ–ª–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç `tests/Feature/Filament/LoginTest.php`:

### –¢–µ—Å—Ç—ã:
- ‚úÖ **login_page_shows_username_field()** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—è "Email –∏–ª–∏ –ª–æ–≥–∏–Ω"
- ‚úÖ **admin_user_can_access_admin_panel()** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ **operator_user_can_access_admin_panel()** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ **warehouse_worker_user_can_access_admin_panel()** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ —Å–∫–ª–∞–¥–∞
- ‚úÖ **sales_manager_user_can_access_admin_panel()** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º
- ‚úÖ **guest_cannot_access_admin_panel()** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≥–æ—Å—Ç–∏ –Ω–µ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤**: 6 —Ç–µ—Å—Ç–æ–≤
- **–£—Å–ø–µ—à–Ω—ã—Ö**: 6 —Ç–µ—Å—Ç–æ–≤ (100%)
- **Assertions**: 8 –ø—Ä–æ–≤–µ—Ä–æ–∫

## üìä –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–ø–æ—Å–æ–±—ã –≤—Ö–æ–¥–∞:

1. **–ü–æ email**: `user@example.com`
2. **–ü–æ –ª–æ–≥–∏–Ω—É**: `username123`
3. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –ø–∞—Ä–æ–ª—å, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

- **–ü–æ–ª–µ –≤–≤–æ–¥–∞**: "Email –∏–ª–∏ –ª–æ–≥–∏–Ω" (–≤–º–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ "Email")
- **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ**: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- **–§–æ–∫—É—Å**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–ª–µ –ª–æ–≥–∏–Ω–∞
- **Tabindex**: –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ Tab

## üéâ –ò—Ç–æ–≥–∏

‚úÖ **–í—Ö–æ–¥ –ø–æ –ª–æ–≥–∏–Ω—É —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**
‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π**
‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ**
‚úÖ **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–Ω–æ–≤–ª–µ–Ω**
‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. **–£–¥–æ–±—Å—Ç–≤–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—Ö–æ–¥–∏—Ç—å –∫–∞–∫ –ø–æ email, —Ç–∞–∫ –∏ –ø–æ –ª–æ–≥–∏–Ω—É
2. **–ì–∏–±–∫–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
4. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π —Ä–æ–ª–µ–π

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ 