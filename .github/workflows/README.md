# GitHub Actions - Автоматический деплой

## Описание
Этот workflow автоматически выполняет деплой на сервер при каждом push в ветку `main`.

## Что выполняется
1. `git pull origin main` - обновление кода
2. `php artisan migrate --force` - выполнение миграций базы данных

## Настройка Secrets

Для работы workflow нужно настроить следующие secrets в репозитории:

### 1. Перейдите в настройки репозитория
- GitHub → ваш репозиторий → Settings → Secrets and variables → Actions

### 2. Добавьте следующие secrets:

#### `HOST`
IP адрес или домен вашего сервера
```
93.189.230.65
```

#### `USERNAME`
Имя пользователя для SSH подключения
```
root
```

#### `SSH_KEY`
Приватный SSH ключ для подключения к серверу
```
-----BEGIN OPENSSH PRIVATE KEY-----
ваш_приватный_ключ_здесь
-----END OPENSSH PRIVATE KEY-----
```

#### `PORT` (опционально)
SSH порт (по умолчанию 22)
```
22
```

## Как это работает

1. При каждом push в ветку `main` автоматически запускается workflow
2. Workflow подключается к серверу по SSH
3. Выполняет `git pull` для обновления кода
4. Запускает `php artisan migrate --force` для обновления базы данных
5. Отправляет уведомление об успешном выполнении

## Безопасность

- SSH ключ должен быть добавлен в `~/.ssh/authorized_keys` на сервере
- Используйте отдельного пользователя с ограниченными правами
- Не храните секреты в коде
