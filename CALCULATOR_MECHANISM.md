# ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğ° Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸ Sklad

## ğŸ“‹ ĞĞ±Ğ·Ğ¾Ñ€

ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ´Ğ²Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ñ… Ğ¼ĞµÑÑ‚Ğ° Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ğ¾Ğ±ÑŠÑ‘Ğ¼Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²:
1. **ĞŸĞ¾ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°** (ReceiptResource) - Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¾Ğ±ÑŠÑ‘Ğ¼Ğ° Ğ¿Ğ¾ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğµ
2. **Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** (SaleResource) - Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¾Ğ±Ñ‰ĞµĞ¹ ÑÑƒĞ¼Ğ¼Ñ‹ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸

ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ **Filament** (SDUI Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€Ğº) Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ **Livewire** Ğ´Ğ»Ñ Ñ€ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸.

---

## ğŸ§® Ğ§ĞĞ¡Ğ¢Ğ¬ 1: ĞšĞĞ›Ğ¬ĞšĞ£Ğ›Ğ¯Ğ¢ĞĞ  ĞĞ‘ĞªĞĞœĞ Ğ’ "ĞŸĞĞ¡Ğ¢Ğ£ĞŸĞ›Ğ•ĞĞ˜Ğ• Ğ¢ĞĞ’ĞĞ Ğ"

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
ReceiptResource (Filament)
    â”œâ”€> Repeater (Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ² Ğ¿Ñ€Ğ¸Ñ‘Ğ¼ĞºĞµ)
    â”‚   â”œâ”€> Select: product_template_id (Ğ’Ñ‹Ğ±Ğ¾Ñ€ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ°)
    â”‚   â”œâ”€> TextInput: quantity (ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾)
    â”‚   â”œâ”€> TextInput: attribute_* (Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸)
    â”‚   â””â”€> TextInput: calculated_volume (Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ° - readonly)
    â”‚
    â””â”€> ProductAttributeCalculator (ĞšĞ»Ğ°ÑÑ-Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº)
        â””â”€> ProductTemplate::testFormula()
            â””â”€> Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğµ
```

### ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

#### Ğ¨Ğ°Ğ³ 1: Ğ’Ñ‹Ğ±Ğ¾Ñ€ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°

```php
Select::make('product_template_id')
    ->live()
    ->afterStateUpdated(function (Set $set) {
        $set('name', '');
        $set('calculated_volume', null);
    })
```

**Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚:**
- ĞŸÑ€Ğ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ° Ğ¾Ñ‡Ğ¸Ñ‰Ğ°ÑÑ‚ÑÑ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
- ĞÑ‡Ğ¸Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ğ±ÑŠÑ‘Ğ¼
- Triggering Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹

#### Ğ¨Ğ°Ğ³ 2: Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº

```php
Grid::make(2)->schema(function (Get $get) {
    $templateId = $get('product_template_id');
    $template = ProductTemplate::find($templateId);
    
    // Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ğ¿Ğ¾Ğ»Ğµ
    foreach ($template->attributes as $attribute) {
        $fieldName = "attribute_{$attribute->variable}";
        
        // Ğ¢Ğ¸Ğ¿ Ğ¿Ğ¾Ğ»Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ type Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
        switch ($attribute->type) {
            case 'number':
                // TextInput Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸ĞµĞ¹ regex
                // live(debounce: 400) - Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¿ÑƒÑÑ‚Ñ 400ms Ğ¿Ğ¾ÑĞ»Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ°
                break;
            case 'text':
                // TextInput Ğ±ĞµĞ· Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ñ… Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğ¹
                break;
            case 'select':
                // Select Ñ Ğ¿Ñ€ĞµĞ´Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¾Ğ¿Ñ†Ğ¸ÑĞ¼Ğ¸
                break;
        }
    }
})
```

**ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ÑĞ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°:**
- `->live()` - Ñ€ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ Ğ²Ğ²Ğ¾Ğ´Ğµ
- `->debounce(400)` - Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° 400ms Ğ¿ĞµÑ€ĞµĞ´ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¾Ğ¹
- `->afterStateUpdated()` - Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ° Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸

#### Ğ¨Ğ°Ğ³ 3: Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¾Ğ±ÑŠÑ‘Ğ¼Ğ° Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»Ñ

```php
->afterStateUpdated(function (Set $set, Get $get) {
    self::calculateVolumeForItem($set, $get);
})

// ĞœĞµÑ‚Ğ¾Ğ´ Ğ² ReceiptResource:
private static function calculateVolumeForItem(Set $set, Get $get): void
{
    $templateId = $get('product_template_id');
    $quantity = $get('quantity');
    $formData = $get();
    
    // ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‘Ğ¼ Ğ² ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€
    ProductAttributeCalculator::calculateAndUpdate($set, $formData, $templateId, $quantity);
}
```

### Ğ¯Ğ´Ñ€Ğ¾: ProductAttributeCalculator

Ğ¤Ğ°Ğ¹Ğ»: `app/Support/ProductAttributeCalculator.php`

#### ĞœĞµÑ‚Ğ¾Ğ´: `calculateAndUpdate()`

```php
public static function calculateAndUpdate(
    Set $set, 
    array $formData, 
    int $templateId, 
    mixed $quantity = null
): void {
    
    // 1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ templateId
    if (!$templateId) {
        $set('calculated_volume', 'Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½');
        return;
    }
    
    // 2. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ° Ğ¸Ğ· Ğ‘Ğ” (Ñ ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼)
    $template = self::getTemplateFromCache($templateId);
    if (!$template) {
        $set('calculated_volume', 'Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½');
        return;
    }
    
    // 3. Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¾Ğ² Ğ¸Ğ· formData
    $attributes = self::extractAttributes($formData);
    // Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: ['length' => 10, 'width' => 5, 'height' => 2]
    
    // 4. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°Ñ…)
    if ($quantity !== null && is_numeric($quantity) && $quantity > 0) {
        $attributes['quantity'] = (int) $quantity;
    }
    
    // 5. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ°Ğ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    $generatedName = self::generateName($template, $attributes);
    if ($generatedName) {
        $set('name', $generatedName);
    }
    // ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: "Ğ”Ğ¾ÑĞºĞ°: 10 x 5 x 2, Ğ¡Ğ¾ÑĞ½Ğ°"
    
    // 6. Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¾Ğ±ÑŠÑ‘Ğ¼Ğ°
    self::calculateVolume($set, $template, $attributes);
}
```

#### Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´: `extractAttributes()`

```php
private static function extractAttributes(array $formData): array
{
    $attributes = [];
    
    foreach ($formData as $key => $value) {
        // Ğ˜Ñ‰ĞµĞ¼ ĞºĞ»ÑÑ‡Ğ¸ Ğ²Ğ¸Ğ´Ğ°: attribute_length, attribute_width
        if (str_starts_with($key, 'attribute_') && $value !== null && $value !== '') {
            $attributeName = str_replace('attribute_', '', $key);
            
            // Ğ’ĞĞ–ĞĞ: ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·ÑƒĞµĞ¼ Ğ·Ğ°Ğ¿ÑÑ‚Ñ‹Ğµ Ğ½Ğ° Ñ‚Ğ¾Ñ‡ĞºĞ¸!
            // ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ²ĞµÑÑ‚Ğ¸ "2,5" - Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·ÑƒĞµĞ¼ Ğ² "2.5"
            $normalizedValue = is_string($value) 
                ? str_replace(',', '.', $value) 
                : $value;
            
            $attributes[$attributeName] = $normalizedValue;
        }
    }
    
    return $attributes;
}
// Ğ’Ñ…Ğ¾Ğ´: ['attribute_length' => '10,5', 'attribute_width' => '5', 'field_other' => 'skip']
// Ğ’Ñ‹Ñ…Ğ¾Ğ´: ['length' => '10.5', 'width' => '5']
```

#### Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´: `generateName()`

```php
private static function generateName(ProductTemplate $template, array $attributes): ?string
{
    if (empty($template->attributes)) {
        return null;
    }
    
    $formulaParts = [];    // Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, ÑƒÑ‡Ğ°ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ² Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğµ
    $regularParts = [];    // Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
    
    foreach ($template->attributes as $templateAttribute) {
        $attributeKey = $templateAttribute->variable;
        
        if (isset($attributes[$attributeKey]) && $attributes[$attributeKey] !== null) {
            if ($templateAttribute->is_in_formula) {
                // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñƒ: "10, 5, 2"
                $formulaParts[] = $attributes[$attributeKey];
            } else {
                // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² Ğ´Ğ¾Ğ¿. Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ: "Ğ¡Ğ¾ÑĞ½Ğ°, Ğ¡ÑƒÑˆÑ‘Ğ½Ğ½Ğ°Ñ"
                $regularParts[] = $attributes[$attributeKey];
            }
        }
    }
    
    // Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ
    $templateName = $template->name ?? 'Ğ¢Ğ¾Ğ²Ğ°Ñ€';
    $generatedName = $templateName;
    
    if (!empty($formulaParts)) {
        $generatedName .= ': ' . implode(' x ', $formulaParts);
        // Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: "Ğ”Ğ¾ÑĞºĞ°: 10 x 5 x 2"
    }
    
    if (!empty($regularParts)) {
        $generatedName .= !empty($formulaParts)
            ? ', ' . implode(', ', $regularParts)
            : ': ' . implode(', ', $regularParts);
        // Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: "Ğ”Ğ¾ÑĞºĞ°: 10 x 5 x 2, Ğ¡Ğ¾ÑĞ½Ğ°, Ğ¡ÑƒÑˆÑ‘Ğ½Ğ½Ğ°Ñ"
    }
    
    return $generatedName;
}
```

#### ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´: `calculateVolume()`

```php
private static function calculateVolume(
    Set $set, 
    ProductTemplate $template, 
    array $attributes
): void {
    
    // 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹
    if (!$template->formula) {
        $set('calculated_volume', 'Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ğ½Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ°');
        return;
    }
    
    // 2. ĞÑ‚Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²ĞºĞ° Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ñ… Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹ > 0
    $numericAttributes = [];
    foreach ($attributes as $key => $value) {
        if (is_numeric($value) && $value > 0) {
            $numericAttributes[$key] = (float) $value;
        }
    }
    
    // 3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ°
    if (empty($numericAttributes)) {
        $set('calculated_volume', 'Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸');
        return;
    }
    
    // 4. Ğ’Ñ‹Ğ·Ğ¾Ğ² Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ° Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹ Ğ¸Ğ· Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
    $testResult = $template->testFormula($numericAttributes);
    
    // 5. ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°
    if ($testResult['success']) {
        $result = $testResult['result'];
        $set('calculated_volume', $result);
        
        // Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² debug Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ
        if (config('app.debug')) {
            Log::debug('Volume calculated successfully', [
                'template' => $template->name,
                'attributes' => $numericAttributes,
                'result' => $result,
            ]);
        }
    } else {
        // ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¸
        $set('calculated_volume', 'ĞÑˆĞ¸Ğ±ĞºĞ° Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹: ' . ($testResult['error'] ?? 'ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°'));
        Log::warning('Volume calculation failed', [
            'template' => $template->name,
            'attributes' => $numericAttributes,
            'error' => $testResult['error'] ?? 'Unknown',
        ]);
    }
}
```

### Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹: ProductTemplate::testFormula()

Ğ¤Ğ°Ğ¹Ğ»: `app/Models/ProductTemplate.php`

```php
public function testFormula(array $values = []): array
{
    if (!$this->formula) {
        return ['success' => false, 'error' => 'Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ğ½Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ°', 'result' => null];
    }
    
    try {
        // 1. Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ· Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹
        $variables = $this->extractVariablesFromFormula();
        // Ğ”Ğ»Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹ "length * width * height" Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ¼: ['length', 'width', 'height']
        
        // 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ñ Ğ²ÑĞµÑ… Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…
        $missingVariables = array_diff($variables, array_keys($values));
        if (!empty($missingVariables)) {
            // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…
            $missingVariableNames = [];
            foreach ($missingVariables as $variable) {
                $attribute = $this->attributes()->where('variable', $variable)->first();
                if ($attribute) {
                    $missingVariableNames[] = $attribute->name;
                }
            }
            
            return [
                'success' => false,
                'error' => implode(', ', $missingVariableNames),
                'result' => null,
            ];
        }
        
        // 3. ĞŸĞ¾Ğ´ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ² Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñƒ
        $expression = $this->formula;
        foreach ($values as $variable => $value) {
            if (is_numeric($value)) {
                // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ regex Ğ´Ğ»Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¼ĞµĞ½Ñ‹ ÑĞ»Ğ¾Ğ² (Ğ½Ğµ Ñ‡Ğ°ÑÑ‚ĞµĞ¹ ÑĞ»Ğ¾Ğ²)
                $pattern = '/\b' . preg_quote($variable, '/') . '\b/';
                $expression = preg_replace($pattern, $value, $expression);
            }
        }
        // Ğ”Ğ»Ñ formula "length * width * height" Ğ¸ values {length: 10, width: 5, height: 2}
        // Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: "10 * 5 * 2"
        
        Log::info('Formula calculation', [
            'original_formula' => $this->formula,
            'values' => $values,
            'final_expression' => $expression,
        ]);
        
        // 4. Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
        $result = $this->evaluateExpression($expression);
        
        return [
            'success' => true,
            'error' => null,
            'result' => round($result, 3),
            // Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°: 100 (10 * 5 * 2)
        ];
    } catch (\Exception $e) {
        return [
            'success' => false,
            'error' => 'ĞÑˆĞ¸Ğ±ĞºĞ° Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ: ' . $e->getMessage(),
            'result' => null,
        ];
    }
}
```

#### Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ: `evaluateExpression()`

```php
private function evaluateExpression(string $expression): float
{
    // 1. Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹
    $expression = str_replace(' ', '', $expression);
    
    // 2. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¼Ğ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸!)
    if (!preg_match('/^[0-9+\-*\/\(\)\.]+$/', $expression)) {
        throw new \Exception('Ğ’Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ½ĞµĞ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹');
    }
    
    // 3. Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ (Ñ€ĞµĞºÑƒÑ€ÑĞ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€ÑĞµÑ€ Ñ ÑĞ¾Ğ±Ğ»ÑĞ´ĞµĞ½Ğ¸ĞµĞ¼ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ° Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹)
    try {
        $result = $this->parseExpression($expression);
        
        if (!is_numeric($result)) {
            throw new \Exception('Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ½Ğµ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼');
        }
        
        return (float) $result;
        
    } catch (\DivisionByZeroError $e) {
        throw new \Exception('Ğ”ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ½Ğ¾Ğ»ÑŒ');
    } catch (\Exception $e) {
        throw new \Exception('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ: ' . $e->getMessage());
    }
}
```

#### ĞŸĞ°Ñ€ÑĞµÑ€ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹: `parseExpression()`

```php
private function parseExpression(string $expression): float
{
    // 1. Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹
    $expression = preg_replace("/\s+/", '', $expression);
    
    // 2. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ ÑĞºĞ¾Ğ±Ğ¾Ğº (Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ/Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ)
    if (!$this->validateParentheses($expression)) {
        throw new \Exception('ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞºĞ¾Ğ±Ğ¾Ğº');
    }
    
    // 3. Ğ ĞµĞºÑƒÑ€ÑĞ¸Ğ²Ğ½Ğ¾Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ñ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ¾Ğ¼ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
    return $this->evaluateExpressionRecursive($expression);
}

// Ğ ĞµĞºÑƒÑ€ÑĞ¸Ğ²Ğ½Ğ¾Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ±Ğ»ÑĞ´Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚:
// 1. Ğ¡ĞºĞ¾Ğ±ĞºĞ¸ ()
// 2. Ğ£Ğ¼Ğ½Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ (*) Ğ¸ Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ (/)
// 3. Ğ¡Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ (+) Ğ¸ Ğ²Ñ‹Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ (-)
// 
// Ğ”Ğ»Ñ "2 + 3 * 4" Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ¼ 14, Ğ° Ğ½Ğµ 20
```

---

## ğŸ’° Ğ§ĞĞ¡Ğ¢Ğ¬ 2: ĞšĞĞ›Ğ¬ĞšĞ£Ğ›Ğ¯Ğ¢ĞĞ  Ğ¡Ğ£ĞœĞœĞ« Ğ’ "Ğ Ğ•ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯"

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
SaleResource (Filament)
    â”œâ”€> TextInput: cash_amount (Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼Ğ¸)
    â”œâ”€> TextInput: nocash_amount (Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ±ĞµĞ·Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼Ğ¸)
    â”œâ”€> TextInput: total_price (Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ - readonly, calculated)
    â”‚
    â””â”€> calculateTotalPrice() (ĞœĞµÑ‚Ğ¾Ğ´ ĞºĞ»Ğ°ÑÑĞ°)
```

### ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

#### Ğ¤Ğ¾Ñ€Ğ¼Ğ° Ğ² SaleResource

```php
Grid::make(5)->schema([
    // ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ ÑÑ‚Ğ¾Ğ»Ğ±ĞµÑ†
    TextInput::make('cash_amount')
        ->label('Ğ¡ÑƒĞ¼Ğ¼Ğ° (Ğ½Ğ°Ğ»)')
        ->numeric()
        ->required()
        ->mask(RawJs::make('$number($input, { 
            decimalPlaces: 2, 
            thousandsSeparator: " ", 
            decimalSeparator: "," 
        })'))
        ->live(onBlur: true)  // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğµ Ñ„Ğ¾ĞºÑƒÑĞ°
        ->afterStateUpdated(function (Set $set, Get $get) {
            static::calculateTotalPrice($set, $get);
        }),
    
    TextInput::make('nocash_amount')
        ->label('Ğ¡ÑƒĞ¼Ğ¼Ğ° (Ğ±ĞµĞ·Ğ½Ğ°Ğ»)')
        ->numeric()
        ->required()
        ->mask(RawJs::make('$number($input, { 
            decimalPlaces: 2, 
            thousandsSeparator: " ", 
            decimalSeparator: "," 
        })'))
        ->live(onBlur: true)
        ->afterStateUpdated(function (Set $set, Get $get) {
            static::calculateTotalPrice($set, $get);
        }),
    
    // Ğ’Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ ÑÑ‚Ğ¾Ğ»Ğ±ĞµÑ†
    TextInput::make('total_price')
        ->label('ĞĞ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ°')
        ->numeric()
        ->disabled()  // Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ
        ->required(),
]);
```

#### ĞœĞµÑ‚Ğ¾Ğ´ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ°: `calculateTotalPrice()`

```php
private static function calculateTotalPrice(Set $set, Get $get): void
{
    // 1. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹ (Ğ¼Ğ¾Ğ³ÑƒÑ‚ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿ÑÑ‚Ñ‹Ğµ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ñ‚Ğ¾Ñ‡ĞµĞº)
    $cashRaw = (string) ($get('cash_amount') ?? '0');
    $nocashRaw = (string) ($get('nocash_amount') ?? '0');
    
    // 2. ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: Ğ·Ğ°Ğ¿ÑÑ‚Ğ°Ñ -> Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ´Ğ»Ñ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    $cashAmount = (float) str_replace(',', '.', $cashRaw);
    $nocashAmount = (float) str_replace(',', '.', $nocashRaw);
    
    // 3. Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ ÑÑƒĞ¼Ğ¼Ñ‹
    $totalPrice = $cashAmount + $nocashAmount;
    
    // 4. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°
    $set('total_price', $totalPrice);
    
    // 5. Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
    Log::info('Sale form: calculateTotalPrice', [
        'cash_amount' => $cashAmount,
        'nocash_amount' => $nocashAmount,
        'total_price' => $totalPrice,
    ]);
}
```

### ĞœĞ°ÑĞºĞ° Ğ²Ğ²Ğ¾Ğ´Ğ° (RawJs)

```javascript
// ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:
// Ğ’Ğ²Ğ¾Ğ´: "1000"
// ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¸Ñ‚ÑÑ: "1 000,00" (Ñ Ñ‚Ñ‹ÑÑÑ‡Ğ°Ğ¼Ğ¸ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ĞµĞ¼)
// Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ: "1000" (Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ)

$number($input, {
    decimalPlaces: 2,          // Ğ”Ğ²Ğ° Ğ·Ğ½Ğ°ĞºĞ° Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ¿ÑÑ‚Ğ¾Ğ¹
    thousandsSeparator: " ",   // ĞŸÑ€Ğ¾Ğ±ĞµĞ» ĞºĞ°Ğº Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ÑŒ Ñ‚Ñ‹ÑÑÑ‡
    decimalSeparator: ","      // Ğ—Ğ°Ğ¿ÑÑ‚Ğ°Ñ ĞºĞ°Ğº Ğ´ĞµÑÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ÑŒ
})
```

---

## ğŸ”„ ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ• ĞĞ¢Ğ›Ğ˜Ğ§Ğ˜Ğ¯

### ĞŸĞ¾ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° vs Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

| ĞÑĞ¿ĞµĞºÑ‚ | ĞŸĞ¾ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ | Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
|--------|-----------|-----------|
| **Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ** | Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° (Ğ´Ğ»Ğ¸Ğ½Ğ°, ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°, Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°, etc.) | Ğ”ĞµĞ½ĞµĞ¶Ğ½Ñ‹Ğµ ÑÑƒĞ¼Ğ¼Ñ‹ (Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ, Ğ±ĞµĞ·Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ) |
| **Ğ¢Ğ¸Ğ¿ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ°** | Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° (Ğ¼Ğ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ) | ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğµ ÑĞ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ²ÑƒÑ… Ğ¿Ğ¾Ğ»ĞµĞ¹ |
| **Ğ ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ** | `live(debounce: 400)` - Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° 400ms | `live(debounce: 400)` - Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° 400ms âœ¨ **Ğ£ĞĞ˜Ğ¤Ğ˜Ğ¦Ğ˜Ğ ĞĞ’ĞĞĞ** |
| **Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ** | ĞŸĞ°Ñ€ÑĞµÑ€ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ² `ProductTemplate::testFormula()` | ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğµ ÑĞ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ float Ñ‡Ğ¸ÑĞµĞ» |
| **Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ¼ĞµĞ½Ğ¸** | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¸Ğ· Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº | ĞĞµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ |
| **ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾Ğ»ĞµĞ¹** | Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ (Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ°) | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ |
| **ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²Ğ²Ğ¾Ğ´Ğ°** | str_replace(',', '.', $value) | str_replace(',', '.', $value) |

---

## ğŸ›¡ï¸ Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ¬

### Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²Ğ²Ğ¾Ğ´Ğ°

1. **Regex Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ² TextInput (Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸):**
   ```php
   ->rules(['regex:/^\d*([.,]\d*)?$/'])
   ->validationMessages(['regex' => 'ĞŸĞ¾Ğ»Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ†Ğ¸Ñ„Ñ€Ñ‹ Ğ¸ Ğ¾Ğ´Ğ½Ñƒ Ğ·Ğ°Ğ¿ÑÑ‚ÑƒÑ Ğ¸Ğ»Ğ¸ Ñ‚Ğ¾Ñ‡ĞºÑƒ'])
   ```
   âœ… Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ñ‹: `10`, `10.5`, `10,5`
   âŒ Ğ—Ğ°Ğ¿Ñ€ĞµÑ‰ĞµĞ½Ñ‹: `abc`, `10,,5`, `10.5.2`

2. **Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»:**
   ```php
   // Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, Ñ‡Ñ‚Ğ¾ Ğ² Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¼Ğ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹
   if (!preg_match('/^[0-9+\-*\/\(\)\.]+$/', $expression)) {
       throw new \Exception('Ğ’Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ½ĞµĞ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹');
   }
   ```
   âœ… Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ñ‹: `10 * 5 + 2`, `(10 + 5) * 2`
   âŒ Ğ—Ğ°Ğ¿Ñ€ĞµÑ‰ĞµĞ½Ñ‹: `exec()`, `system()`, Ğ»ÑĞ±Ğ¾Ğ¹ ĞºĞ¾Ğ´

3. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞºÑƒÑ€ÑĞ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ°Ñ€ÑĞµÑ€Ğ° Ğ²Ğ¼ĞµÑÑ‚Ğ¾ eval():**
   - Ğ’ `ReceiptResource::calculateVolumeForItem()` ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ» `eval()`
   - Ğ’ `ProductTemplate::testFormula()` Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ÑĞ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€ÑĞµÑ€ - **Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½ĞµĞµ!**

---

## ğŸ“Š ĞŸĞ Ğ˜ĞœĞ•Ğ  ĞŸĞĞ›ĞĞĞ“Ğ Ğ¦Ğ˜ĞšĞ›Ğ

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹: ĞŸÑ€Ğ¸Ñ‘Ğ¼ Ğ´Ğ¾ÑĞºĞ¸

1. **ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½:**
   ```
   Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½: "Ğ”Ğ¾ÑĞºĞ°"
   Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸: length, width, height, wood_type
   Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°: "length * width * height / 1000"
   ```

2. **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ğ¾Ğ»Ñ:**
   ```
   â˜ Ğ”Ğ»Ğ¸Ğ½Ğ° (ÑĞ¼): [____]
   â˜ Ğ¨Ğ¸Ñ€Ğ¸Ğ½Ğ° (ÑĞ¼): [____]
   â˜ Ğ’Ñ‹ÑĞ¾Ñ‚Ğ° (ÑĞ¼): [____]
   â˜ Ğ¢Ğ¸Ğ¿ Ğ´Ñ€ĞµĞ²ĞµÑĞ¸Ğ½Ñ‹: [Ğ²Ñ‹Ğ¿Ğ°Ğ´Ğ°ÑÑ‰Ğ¸Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº]
   ```

3. **ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
   ```
   Ğ”Ğ»Ğ¸Ğ½Ğ°: 200
   Ğ¨Ğ¸Ñ€Ğ¸Ğ½Ğ°: 50,5      â† Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ñ Ğ·Ğ°Ğ¿ÑÑ‚Ğ¾Ğ¹
   Ğ’Ñ‹ÑĞ¾Ñ‚Ğ°: 2,5       â† Ğ½Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ñ Ğ·Ğ°Ğ¿ÑÑ‚Ğ¾Ğ¹
   Ğ¢Ğ¸Ğ¿: Ğ¡Ğ¾ÑĞ½Ğ°
   ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾: 10
   ```

4. **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚ Ğ¸ Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚:**
   ```php
   $attributes = [
       'length' => 200,       // float
       'width' => 50.5,       // float - Ğ·Ğ°Ğ¿ÑÑ‚Ğ°Ñ Ğ·Ğ°Ğ¼ĞµĞ½ĞµĞ½Ğ°
       'height' => 2.5,       // float - Ğ·Ğ°Ğ¿ÑÑ‚Ğ°Ñ Ğ·Ğ°Ğ¼ĞµĞ½ĞµĞ½Ğ°
       'wood_type' => 'Ğ¡Ğ¾ÑĞ½Ğ°',
       'quantity' => 10
   ]
   ```

5. **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸Ğ¼Ñ:**
   ```
   Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½: "Ğ”Ğ¾ÑĞºĞ°: 200 x 50.5 x 2.5, Ğ¡Ğ¾ÑĞ½Ğ°"
   ```

6. **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ Ğ¾Ğ±ÑŠÑ‘Ğ¼:**
   ```
   Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°: "length * width * height / 1000"
   ĞŸĞ¾Ğ´ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°: "200 * 50.5 * 2.5 / 1000"
   ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ¸ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ: (200 * 50.5 * 2.5) / 1000 = 25.25
   Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: 25.25 Ğ¼Â³
   ```

7. **ĞŸĞ¾Ğ»Ğµ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
   ```
   ĞĞ±ÑŠĞµĞ¼: 25.250 Ğ¼Â³
   ```

---

## ğŸ› Ğ˜Ğ—Ğ’Ğ•Ğ¡Ğ¢ĞĞ«Ğ• ĞĞ¡ĞĞ‘Ğ•ĞĞĞĞ¡Ğ¢Ğ˜ Ğ˜ ĞŸĞĞ¢Ğ•ĞĞ¦Ğ˜ĞĞ›Ğ¬ĞĞ«Ğ• ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ«

### 1. Ğ”Ğ²Ğ¾Ğ¹Ğ½Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ² Ğ² ReceiptResource

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Ğ’ `ReceiptResource::calculateVolumeForItem()` ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ `eval()`:
```php
$result = eval("return $expression;");  // âš ï¸ Ğ£Ğ¯Ğ—Ğ’Ğ˜ĞœĞĞ¡Ğ¢Ğ¬!
```

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ `ProductAttributeCalculator` Ğ¸ `ProductTemplate::testFormula()` Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğ¼ Ğ¿Ğ°Ñ€ÑĞµÑ€Ğ¾Ğ¼.

### 2. ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿ÑÑ‚Ñ‹Ñ…/Ñ‚Ğ¾Ñ‡ĞµĞº

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ°Ğº `2.5`, Ñ‚Ğ°Ğº Ğ¸ `2,5`, Ñ‡Ñ‚Ğ¾ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾ Ğ´Ğ»Ñ UX, Ğ½Ğ¾:
- ĞŸÑ€Ğ¸ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ñ‡Ğ¸ÑĞ»Ğ° Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ½ĞµĞ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·ÑƒĞµĞ¼Ğ¾Ğµ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ²Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ÑŒ

### 3. Debounce Ğ² Ğ¿Ğ¾ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğ¸ vs onBlur Ğ² Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

- **ĞŸĞ¾ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ:** `live(debounce: 400)` - Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¿ÑƒÑÑ‚Ñ 400ms
  - âœ… ĞĞµ Ğ¿ĞµÑ€ĞµĞ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ ÑĞµÑ€Ğ²ĞµÑ€ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼Ğ¸
  - âŒ Ğ•ÑÑ‚ÑŒ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¿ĞµÑ€ĞµĞ´ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ¼

- **Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** `live(onBlur: true)` - Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğµ Ñ„Ğ¾ĞºÑƒÑĞ°
  - âœ… Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ³Ğ¾Ñ‚Ğ¾Ğ²
  - âŒ Ğ•ÑĞ»Ğ¸ Ğ·Ğ°Ğ±Ñ‹Ğ» ĞºĞ»Ğ¸ĞºĞ½ÑƒÑ‚ÑŒ - Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾Ğ¹Ğ´Ñ‘Ñ‚

### 4. ĞšĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ²

```php
private static array $templateCache = [];  // ĞšĞµÑˆ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸

public static function clearCache(): void {
    self::$templateCache = [];
}
```

- âœ… Ğ˜Ğ·Ğ±ĞµĞ³Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº Ğ‘Ğ”
- âŒ Ğ•ÑĞ»Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ ÑĞµÑÑĞ¸Ğ¸ - Ğ½Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ Ğ´Ğ¾ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ¸ ĞºĞµÑˆĞ°

---

## ğŸ“š Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—Ğ£Ğ•ĞœĞ«Ğ• ĞšĞ›ĞĞ¡Ğ¡Ğ« Ğ˜ Ğ¤ĞĞ™Ğ›Ğ«

### Core Files
- `app/Support/ProductAttributeCalculator.php` - Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ»Ğ°ÑÑ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ²
- `app/Models/ProductTemplate.php` - Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ° Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°Ğ¼Ğ¸
- `app/Models/Product.php` - Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
- `app/Models/Sale.php` - Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸

### Filament Resources
- `app/Filament/Resources/ReceiptResource.php` - Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ¿Ñ€Ğ¸Ñ‘Ğ¼ĞºĞ¸
- `app/Filament/Resources/SaleResource.php` - Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸
- `app/Filament/Resources/ProductInTransitResource.php` - Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ² Ğ¿ÑƒÑ‚Ğ¸

### Controllers
- `app/Http/Controllers/Api/ProductController.php` - API endpoints
- `app/Http/Controllers/ProductWebController.php` - Ğ²ĞµĞ±-ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€

---

## ğŸ”§ Ğ Ğ•ĞšĞĞœĞ•ĞĞ”ĞĞ¦Ğ˜Ğ˜ ĞŸĞ Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞ˜Ğ®

1. **Ğ£Ğ½Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ debounce/onBlur ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ** - Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¾Ğ´Ğ½Ñƒ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ„Ğ¾Ñ€Ğ¼
2. **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ Redis** Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
3. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ JavaScript Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ** Ğ¿ĞµÑ€ĞµĞ´ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¾Ğ¹ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€ Ğ´Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞµĞ¹ UX
4. **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»** - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµĞ´ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸ĞµĞ¼
5. **Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ Ñ‡Ğ¸ÑĞµĞ»** Ğ² UI (ÑĞ¿Ñ€Ğ°Ğ²ĞºĞ°/tooltip)
6. **ĞšĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ²** Ğ´Ğ»Ñ Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ñ… Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

---

## ğŸ“– Ğ¡Ğ¡Ğ«Ğ›ĞšĞ˜ ĞĞ ĞšĞĞ”

- ProductAttributeCalculator: `app/Support/ProductAttributeCalculator.php` (188 ÑÑ‚Ñ€Ğ¾Ğº)
- ProductTemplate Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹: `app/Models/ProductTemplate.php` (lines 68-311)
- ReceiptResource: `app/Filament/Resources/ReceiptResource.php` (lines 186-238)
- SaleResource: `app/Filament/Resources/SaleResource.php` (lines 61-78)

---

## ğŸ”€ Ğ”Ğ˜ĞĞ“Ğ ĞĞœĞœĞ« ĞŸĞĞ¢ĞĞšĞĞ’ Ğ”ĞĞĞĞ«Ğ¥

### Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° 1: ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸ Ğ²Ğ²Ğ¾Ğ´Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ğ² "ĞŸĞ¾ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬ Ğ’Ğ’ĞĞ”Ğ˜Ğ¢ Ğ—ĞĞĞ§Ğ•ĞĞ˜Ğ• Ğ’ ĞŸĞĞ›Ğ• Ğ¥ĞĞ ĞĞšĞ¢Ğ•Ğ Ğ˜Ğ¡Ğ¢Ğ˜ĞšĞ˜             â”‚
â”‚  (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: TextInput "Ğ¨Ğ¸Ñ€Ğ¸Ğ½Ğ°" = "50,5")                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LIVEWIRE ĞĞ‘ĞĞĞ Ğ£Ğ–Ğ˜Ğ’ĞĞ•Ğ¢ Ğ˜Ğ—ĞœĞ•ĞĞ•ĞĞ˜Ğ• (live: debounce: 400ms)       â”‚
â”‚  âœ“ ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ 400ms Ğ±ĞµĞ· Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹                           â”‚
â”‚  âœ“ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ AJAX-Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILAMENT Ğ’Ğ«Ğ—Ğ«Ğ’ĞĞ•Ğ¢ afterStateUpdated()                           â”‚
â”‚  â””â”€> ReceiptResource::calculateVolumeForItem($set, $get)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ˜Ğ—Ğ’Ğ›Ğ•Ğ§Ğ•ĞĞ˜Ğ• Ğ”ĞĞĞĞ«Ğ¥ Ğ˜Ğ— Ğ¤ĞĞ ĞœĞ« ($get())                           â”‚
â”‚  {                                                               â”‚
â”‚    'product_template_id' => 1,                                   â”‚
â”‚    'quantity' => 10,                                             â”‚
â”‚    'attribute_length' => '200',                                  â”‚
â”‚    'attribute_width' => '50,5',        â† Ğ’Ğ’ĞĞ” ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¯      â”‚
â”‚    'attribute_height' => '2,5',                                  â”‚
â”‚    'attribute_wood_type' => 'Ğ¡Ğ¾ÑĞ½Ğ°'                             â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProductAttributeCalculator::calculateAndUpdate()               â”‚
â”‚  1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ templateId                                        â”‚
â”‚  2. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ° Ğ¸Ğ· ĞºĞµÑˆĞ°                                    â”‚
â”‚  3. Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¾Ğ² (extractAttributes)                    â”‚
â”‚     âœ“ ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ²ÑĞµ ĞºĞ»ÑÑ‡Ğ¸ Ğ²Ğ¸Ğ´Ğ° "attribute_*"                     â”‚
â”‚     âœ“ ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚: "50,5" â†’ 50.5                              â”‚
â”‚  4. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ¼ĞµĞ½Ğ¸ (generateName)                              â”‚
â”‚  5. Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¾Ğ±ÑŠÑ‘Ğ¼Ğ° (calculateVolume)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  extractAttributes(): ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‡Ğ¸ÑĞµĞ»                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ INPUT: 'attribute_width' => '50,5'                       â”‚   â”‚
â”‚  â”‚ REGEX: str_replace(',', '.', '50,5')                    â”‚   â”‚
â”‚  â”‚ OUTPUT: 'width' => 50.5 (float)                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: $attributes = [                                    â”‚
â”‚    'length' => 200,                                             â”‚
â”‚    'width' => 50.5,      â† ĞĞĞ ĞœĞĞ›Ğ˜Ğ—ĞĞ’ĞĞĞ                       â”‚
â”‚    'height' => 2.5,      â† ĞĞĞ ĞœĞĞ›Ğ˜Ğ—ĞĞ’ĞĞĞ                       â”‚
â”‚    'wood_type' => 'Ğ¡Ğ¾ÑĞ½Ğ°'                                       â”‚
â”‚  ]                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  generateName(): Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ğ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Ğ‘ĞµÑ€Ñ‘Ñ‚ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ñ is_in_formula = true             â”‚   â”‚
â”‚  â”‚ formulaParts = [200, 50.5, 2.5]                         â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚ Ğ‘ĞµÑ€Ñ‘Ñ‚ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸                          â”‚   â”‚
â”‚  â”‚ regularParts = ['Ğ¡Ğ¾ÑĞ½Ğ°']                                â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: "Ğ”Ğ¾ÑĞºĞ°: 200 x 50.5 x 2.5, Ğ¡Ğ¾ÑĞ½Ğ°"           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  $set('name', 'Ğ”Ğ¾ÑĞºĞ°: 200 x 50.5 x 2.5, Ğ¡Ğ¾ÑĞ½Ğ°')               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  calculateVolume(): ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚                             â”‚
â”‚  1. Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ñ… Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¾Ğ² (> 0)                            â”‚
â”‚     $numericAttributes = ['length' => 200, 'width' => 50.5,    â”‚
â”‚                          'height' => 2.5]                      â”‚
â”‚  2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹                                   â”‚
â”‚  3. Ğ’Ñ‹Ğ·Ğ¾Ğ² ProductTemplate::testFormula($numericAttributes)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProductTemplate::testFormula()                                 â”‚
â”‚  1. Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ· Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹                           â”‚
â”‚     formula: "length * width * height / 1000"                  â”‚
â”‚     variables: ['length', 'width', 'height']                   â”‚
â”‚                                                                  â”‚
â”‚  2. ĞŸĞ¾Ğ´ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹ Ğ² Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñƒ (regex Ñ \b - Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ ÑĞ»Ğ¾Ğ²) â”‚
â”‚     expression = "200 * 50.5 * 2.5 / 1000"                    â”‚
â”‚                                                                  â”‚
â”‚  3. Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ (evaluateExpression)                 â”‚
â”‚     âœ“ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ regex: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ [0-9+\-*\/\(\)\.]              â”‚
â”‚     âœ“ Ğ ĞµĞºÑƒÑ€ÑĞ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€ÑĞµÑ€ Ñ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ¾Ğ¼ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹              â”‚
â”‚     âœ“ Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ: (200 * 50.5 * 2.5) / 1000 = 25.25          â”‚
â”‚                                                                  â”‚
â”‚  4. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°                                         â”‚
â”‚     return [                                                    â”‚
â”‚       'success' => true,                                        â”‚
â”‚       'error' => null,                                          â”‚
â”‚       'result' => 25.250  â† ĞĞšĞ Ğ£Ğ“Ğ›Ğ•ĞĞ Ğ”Ğ 3 Ğ—ĞĞĞšĞĞ’             â”‚
â”‚     ]                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ£Ğ¡Ğ¢ĞĞĞĞ’ĞšĞ Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢Ğ Ğ’ Ğ¤ĞĞ ĞœĞ£                                   â”‚
â”‚  $set('calculated_volume', 25.250)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LIVEWIRE ĞĞ‘ĞĞĞ’Ğ›Ğ¯Ğ•Ğ¢ UI (Ñ€ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ĞŸĞ¾Ğ»Ğµ "ĞĞ±ÑŠĞµĞ¼" Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ:                               â”‚   â”‚
â”‚  â”‚ Ğ‘Ñ‹Ğ»Ğ¾: [Ğ¿ÑƒÑÑ‚Ğ¾]                                           â”‚   â”‚
â”‚  â”‚ Ğ¡Ñ‚Ğ°Ğ»Ğ¾: 25.250 Ğ¼Â³                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  âœ“ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸ (number_format)             â”‚
â”‚  âœ“ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° 2: ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸ Ğ²Ğ²Ğ¾Ğ´Ğµ ÑÑƒĞ¼Ğ¼Ñ‹ Ğ² "Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬ Ğ’Ğ’ĞĞ”Ğ˜Ğ¢ Ğ¡Ğ£ĞœĞœĞ£ Ğ’ ĞŸĞĞ›Ğ•                                â”‚
â”‚  ĞĞ°Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ: [____]  â†’  Ğ’Ğ²Ğ¾Ğ´: "1000"                              â”‚
â”‚  Ğ‘ĞµĞ·Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ: [____]  â†’  Ğ’Ğ²Ğ¾Ğ´: "500,50"                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LIVEWIRE ĞĞ‘ĞĞĞ Ğ£Ğ–Ğ˜Ğ’ĞĞ•Ğ¢ ĞŸĞĞ¢Ğ•Ğ Ğ® Ğ¤ĞĞšĞ£Ğ¡Ğ (live: onBlur: true)       â”‚
â”‚  âœ“ ĞœĞ°ÑĞºĞ° Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·ÑƒĞµÑ‚ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ                  â”‚
â”‚    "1000" â†’ "1 000,00" (Ñ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ĞµĞ¼ Ñ‚Ñ‹ÑÑÑ‡ Ğ¸ 2 Ğ·Ğ½Ğ°ĞºĞ°)       â”‚
â”‚  âœ“ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ AJAX-Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğµ Ñ„Ğ¾ĞºÑƒÑĞ°         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILAMENT Ğ’Ğ«Ğ—Ğ«Ğ’ĞĞ•Ğ¢ afterStateUpdated()                            â”‚
â”‚  â””â”€> SaleResource::calculateTotalPrice($set, $get)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ĞŸĞĞ›Ğ£Ğ§Ğ•ĞĞ˜Ğ• Ğ—ĞĞĞ§Ğ•ĞĞ˜Ğ™ Ğ˜Ğ— Ğ¤ĞĞ ĞœĞ« ($get())                            â”‚
â”‚  {                                                                â”‚
â”‚    'cash_amount' => '1 000,00',      â† ĞĞ¢Ğ¤ĞĞ ĞœĞĞ¢Ğ˜Ğ ĞĞ’ĞĞĞ         â”‚
â”‚    'nocash_amount' => '500,50'        â† ĞĞ¢Ğ¤ĞĞ ĞœĞĞ¢Ğ˜Ğ ĞĞ’ĞĞĞ         â”‚
â”‚  }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  calculateTotalPrice() - ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ¾Ğº Ğ² float                            â”‚ â”‚
â”‚  â”‚    $cashRaw = (string) '1 000,00'                          â”‚ â”‚
â”‚  â”‚    str_replace(',', '.', '1 000,00')  â† ĞĞ¨Ğ˜Ğ‘ĞšĞ!           â”‚ â”‚
â”‚  â”‚    Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: '1 000.00' â† Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹ Ğ½Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ñ‹!            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚    PHP ĞŸĞ Ğ•ĞĞ‘Ğ ĞĞ—Ğ£Ğ•Ğ¢ Ğš FLOAT (Ğ¸Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»):           â”‚ â”‚
â”‚  â”‚    (float) '1 000.00' = 1.0 â† ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ!                â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚ Ğ’ĞĞ–ĞĞ: Ğ­Ñ‚Ğ¾ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°!                          â”‚ â”‚
â”‚  â”‚ ĞÑƒĞ¶Ğ½Ğ¾ ÑƒĞ´Ğ°Ğ»ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹ Ğ¿ĞµÑ€ĞµĞ´ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â”‚  2. Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ ÑÑƒĞ¼Ğ¼Ñ‹ (Ğ¿Ñ€Ğ¸ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾Ğ¹ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸)                  â”‚
â”‚    $cashAmount = 1000.00                                          â”‚
â”‚    $nocashAmount = 500.50                                         â”‚
â”‚    $totalPrice = 1000.00 + 500.50 = 1500.50                     â”‚
â”‚                                                                    â”‚
â”‚  3. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°                                         â”‚
â”‚    $set('total_price', 1500.50)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ›ĞĞ“Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•                                                      â”‚
â”‚  Log::info('Sale form: calculateTotalPrice', [                   â”‚
â”‚    'cash_amount' => 1000.00,                                     â”‚
â”‚    'nocash_amount' => 500.50,                                    â”‚
â”‚    'total_price' => 1500.50,                                     â”‚
â”‚  ])                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LIVEWIRE ĞĞ‘ĞĞĞ’Ğ›Ğ¯Ğ•Ğ¢ UI                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ĞŸĞ¾Ğ»Ğµ "ĞĞ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ°" Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ:                            â”‚ â”‚
â”‚  â”‚ Ğ‘Ñ‹Ğ»Ğ¾: [Ğ¿ÑƒÑÑ‚Ğ¾]                                              â”‚ â”‚
â”‚  â”‚ Ğ¡Ñ‚Ğ°Ğ»Ğ¾: 1500.50                                             â”‚ â”‚
â”‚  â”‚ ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ: 1 500,50 (Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° 3: Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ ĞºĞ»Ğ°ÑÑĞ¾Ğ² Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ²

```
                    FILAMENT RESOURCE
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚                 â”‚
   ReceiptResource   SaleResource   ProductInTransitResource
        â”‚                 â”‚                 â”‚
        â”œâ”€ Form()         â”œâ”€ Form()        â””â”€ Form()
        â”‚  â”‚              â”‚  â”‚
        â”‚  â”œâ”€ Repeater    â”‚  â””â”€ Grid (cash_amount, nocash_amount, total_price)
        â”‚  â”‚  â”‚           â”‚     â”‚
        â”‚  â”‚  â”œâ”€ Select    â”‚     â””â”€ afterStateUpdated â†’ calculateTotalPrice()
        â”‚  â”‚  â”‚  (template_id)    â”‚
        â”‚  â”‚  â”‚  â”‚                â””â”€ norms: ',.' â†’ '.', adds numbers
        â”‚  â”‚  â”‚  â””â”€ afterStateUpdated
        â”‚  â”‚  â”‚
        â”‚  â”‚  â”œâ”€ TextInput (quantity, attributes)
        â”‚  â”‚  â”‚  â”‚
        â”‚  â”‚  â”‚  â””â”€ live(debounce: 400)
        â”‚  â”‚  â”‚     â””â”€ afterStateUpdated â†’ calculateVolumeForItem()
        â”‚  â”‚  â”‚        â”‚
        â”‚  â”‚  â”‚        â””â”€ CALLS
        â”‚  â”‚  â”‚           â”‚
        â”‚  â”‚  â””â”€ TextInput (calculated_volume, readonly)
        â”‚  â”‚
        â”‚  â””â”€ ProductAttributeCalculator
        â”‚     â”‚
        â”‚     â”œâ”€ calculateAndUpdate()
        â”‚     â”‚  â”œâ”€ 1ï¸âƒ£  extractAttributes()     â† Extract attribute_* keys
        â”‚     â”‚  â”‚       â”œâ”€ Normalize: ',' â†’ '.'
        â”‚     â”‚  â”‚       â””â”€ Return: $attributes
        â”‚     â”‚  â”‚
        â”‚     â”‚  â”œâ”€ 2ï¸âƒ£  generateName()          â† Build product name
        â”‚     â”‚  â”‚       â”œâ”€ Separate formula vs regular parts
        â”‚     â”‚  â”‚       â””â”€ Return: "Product: 200 x 50.5, SĞ¾ÑĞ½Ğ°"
        â”‚     â”‚  â”‚
        â”‚     â”‚  â””â”€ 3ï¸âƒ£  calculateVolume()        â† Compute volume
        â”‚     â”‚         â”‚
        â”‚     â”‚         â””â”€ CALLS
        â”‚     â”‚
        â”‚     â””â”€ ProductTemplate::testFormula()
        â”‚        â”‚
        â”‚        â”œâ”€ 1ï¸âƒ£  extractVariablesFromFormula()
        â”‚        â”‚       â”œâ”€ Regex: /[a-zA-Z_][a-zA-Z0-9_]*/
        â”‚        â”‚       â””â”€ Filter out: sin, cos, sqrt, etc.
        â”‚        â”‚
        â”‚        â”œâ”€ 2ï¸âƒ£  Substitute variables in formula
        â”‚        â”‚       â”œâ”€ Regex: /\b{variable}\b/
        â”‚        â”‚       â””â”€ Result: "200 * 50.5 * 2.5 / 1000"
        â”‚        â”‚
        â”‚        â””â”€ 3ï¸âƒ£  evaluateExpression()
        â”‚                â”œâ”€ Validate: /^[0-9+\-*\/\(\)\.]+$/
        â”‚                â”œâ”€ parseExpression()
        â”‚                â”‚   â”œâ”€ validateParentheses()
        â”‚                â”‚   â””â”€ evaluateExpressionRecursive()
        â”‚                â”‚       â”œâ”€ Handle operator precedence
        â”‚                â”‚       â””â”€ Calculate recursively
        â”‚                â””â”€ Return: 25.25
```

### Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° 4: Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Livewire ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ° Ğ¿Ñ€Ğ¸ Ğ²Ğ²Ğ¾Ğ´Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£  Ğ˜ĞĞ˜Ğ¦Ğ˜ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯ ĞšĞĞœĞŸĞĞĞ•ĞĞ¢Ğ                                 â”‚
â”‚     â”œâ”€ mount() Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ                                      â”‚
â”‚     â”œâ”€ $template = ProductTemplate::find(1)                    â”‚
â”‚     â””â”€ schema() Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾Ğ»Ñ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ $template            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£  ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬ Ğ’Ğ«Ğ‘Ğ˜Ğ ĞĞ•Ğ¢ Ğ¨ĞĞ‘Ğ›ĞĞ (live)                      â”‚
â”‚     â”œâ”€ AJAX: product_template_id = 1                           â”‚
â”‚     â”œâ”€ Livewire Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ                            â”‚
â”‚     â”œâ”€ afterStateUpdated Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ                            â”‚
â”‚     â”‚  â”œâ”€ $set('name', '')                                     â”‚
â”‚     â”‚  â”œâ”€ $set('calculated_volume', null)                      â”‚
â”‚     â”‚  â””â”€ schema() ĞŸĞ•Ğ Ğ•Ğ“Ğ•ĞĞ•Ğ Ğ˜Ğ Ğ£Ğ•Ğ¢Ğ¡Ğ¯ Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾Ğ»ÑĞ¼Ğ¸!           â”‚
â”‚     â””â”€ HTML Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ (Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ´Ğ»Ñ Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸Ğº)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£  ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬ Ğ’Ğ’ĞĞ”Ğ˜Ğ¢ Ğ¥ĞĞ ĞĞšĞ¢Ğ•Ğ Ğ˜Ğ¡Ğ¢Ğ˜ĞšĞ£ (live debounce: 400)  â”‚
â”‚     â”œâ”€ Ğ’Ğ²Ğ¾Ğ´: TextInput "width" = "50,5"                        â”‚
â”‚     â”œâ”€ Ğ–Ğ”ĞĞœ 400ms Ğ‘Ğ•Ğ— ĞĞĞ’Ğ«Ğ¥ Ğ˜Ğ—ĞœĞ•ĞĞ•ĞĞ˜Ğ™                         â”‚
â”‚     â”œâ”€ AJAX Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ: attribute_width = "50,5"                   â”‚
â”‚     â”œâ”€ Livewire Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ                            â”‚
â”‚     â”œâ”€ afterStateUpdated Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ                            â”‚
â”‚     â”‚  â””â”€ calculateVolumeForItem($set, $get)                   â”‚
â”‚     â”‚     â””â”€ ProductAttributeCalculator::calculateAndUpdate()  â”‚
â”‚     â””â”€ $set('calculated_volume', 25.25) Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4ï¸âƒ£  LIVEWIRE RE-RENDERS ĞšĞĞœĞŸĞĞĞ•ĞĞ¢                             â”‚
â”‚     â”œâ”€ Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ HTML                                 â”‚
â”‚     â”œâ”€ Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ½Ñ‹Ğµ Ñ‡Ğ°ÑÑ‚Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ            â”‚
â”‚     â”œâ”€ JavaScript Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ DOM                                â”‚
â”‚     â””â”€ ĞŸĞ¾Ğ»Ğµ "ĞĞ±ÑŠĞµĞ¼" Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚: 25.250 Ğ¼Â³             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5ï¸âƒ£  Ğ¡ĞĞ¥Ğ ĞĞĞ•ĞĞ˜Ğ• Ğ”ĞĞĞĞ«Ğ¥ (Save)                                  â”‚
â”‚     â”œâ”€ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ĞºĞ»Ğ¸ĞºĞ°ĞµÑ‚ "Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ"                        â”‚
â”‚     â”œâ”€ Ğ¤Ğ¾Ñ€Ğ¼Ğ° Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ                                      â”‚
â”‚     â”œâ”€ mutateFormDataBeforeSave() Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ                   â”‚
â”‚     â”‚  â””â”€ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿ĞµÑ€ĞµĞ´ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸ĞµĞ¼                  â”‚
â”‚     â”œâ”€ Product::create($data) ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ² Ğ‘Ğ”                  â”‚
â”‚     â””â”€ Ğ ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚ Ğ½Ğ° ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ˜Ğ• (19.10.2025)

### Ğ£Ğ½Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ñ€ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸

**Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:** Ğ Ğ°Ğ·Ğ´ĞµĞ» "Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ" Ğ±Ñ‹Ğ» Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½ Ğ´Ğ»Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞµĞ´Ğ¸Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ° Ñ€ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸.

**Ğ”Ğ¾:**
```php
// SaleResource - Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
TextInput::make('cash_amount')
    ->live(onBlur: true)  // Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğµ Ñ„Ğ¾ĞºÑƒÑĞ°
```

**ĞŸĞ¾ÑĞ»Ğµ:**
```php
// SaleResource - Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
TextInput::make('cash_amount')
    ->live(debounce: 400)  // Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· 400ms
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- âœ… ĞšĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ñ‹Ğ¹ UX - Ğ¾Ğ´Ğ¸Ğ½ Ğ¸ Ñ‚Ğ¾Ñ‚ Ğ¶Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼ Ğ²ĞµĞ·Ğ´Ğµ
- âœ… Ğ›ÑƒÑ‡ÑˆĞ°Ñ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ - Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ²Ğ¸Ğ´Ğ½Ğ¾ ÑÑ€Ğ°Ğ·Ñƒ Ğ±ĞµĞ· ĞºĞ»Ğ¸ĞºĞ¾Ğ²
- âœ… ĞœĞµĞ½ÑŒÑˆĞµ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ - Ğ·Ğ°Ğ±Ñ‹Ğ»Ğ¸ ĞºĞ»Ğ¸ĞºĞ½ÑƒÑ‚ÑŒ = Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾Ğ¹Ğ´Ñ‘Ñ‚
- âœ… ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€ - 400ms debounce ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²ĞµĞ½

**Ğ¤Ğ°Ğ¹Ğ»Ñ‹, Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ½Ñ‹Ğµ:**
- `app/Filament/Resources/SaleResource.php` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 359, 369)
