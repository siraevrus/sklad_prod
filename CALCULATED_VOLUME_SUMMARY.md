# üìö –ü–û–õ–ù–´–ô –†–ê–ó–ë–û–† calculated_volume

## ‚ú® –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç

`calculated_volume` ‚Äî —ç—Ç–æ –æ–±—ä–µ–º —Ç–æ–≤–∞—Ä–∞ –∑–∞ –æ–¥–Ω—É –µ–¥–∏–Ω–∏—Ü—É, **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º—ã–π** –∏–∑:
- **–§–æ—Ä–º—É–ª—ã —à–∞–±–ª–æ–Ω–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `length * width * height / 1000000`)
- **–ó–Ω–∞—á–µ–Ω–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫** (–∫–æ—Ç–æ—Ä—ã–µ –≤—ã –≤–≤–æ–¥–∏—Ç–µ –≤ —Ñ–æ—Ä–º–µ: length=2000, width=100, height=25)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `5.0000` –º¬≥ ‚Äî —ç—Ç–æ –æ–±—ä–µ–º 1 –µ–¥–∏–Ω–∏—Ü—ã —Ç–æ–≤–∞—Ä–∞. –ü—Ä–∏ quantity=100, –æ–±—â–∏–π –æ–±—ä–µ–º = 500 –º¬≥.

---

## üîç –ì–î–ï –í–°–ï –í–´–ß–ò–°–õ–Ø–ï–¢–°–Ø

### 1. **FILAMENT –§–û–†–ú–ê** (ProductResource.php)

–ü—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞:

```
‚îå‚îÄ –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ (product_template_id)
‚îÇ  ‚îî‚îÄ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ–ª—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
‚îÇ
‚îú‚îÄ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (attribute_X fields)
‚îÇ  ‚îî‚îÄ live –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç calculated_volume
‚îÇ
‚îî‚îÄ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
   ‚îî‚îÄ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
```

**–ö–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è:**
- `product_template_id` ‚Üí `afterStateUpdated()` (—Å—Ç—Ä–æ–∫–∞ 123)
- `attribute_X` ‚Üí `afterStateUpdated()` (—Å—Ç—Ä–æ–∫–∞ 268)
- `quantity` ‚Üí `afterStateUpdated()` (—Å—Ç—Ä–æ–∫–∞ 152)

### 2. **BACKEND –õ–û–ì–ò–ö–ê**

**ProductTemplate::testFormula()** (ProductTemplate.php:68)
- –ë–µ—Ä—ë—Ç —Ñ–æ—Ä–º—É–ª—É –∏–∑ —à–∞–±–ª–æ–Ω–∞
- –ë–µ—Ä—ë—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `['success' => bool, 'result' => float]`

**Product::calculateVolume()** (Product.php:336)
- –í—ã–∑—ã–≤–∞–µ—Ç `$template->testFormula()`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–º

**CreateProduct::mutateFormDataBeforeCreate()** (CreateProduct.php:59)
- –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `data['calculated_volume']`
- –í—ã–∑—ã–≤–∞–µ—Ç `Product::create($data)`

### 3. **–ë–ê–ó–ê –î–ê–ù–ù–´–•** (—Ç–∞–±–ª–∏—Ü–∞ products)

```sql
CREATE TABLE products (
    id INT PRIMARY KEY,
    product_template_id INT,
    attributes JSON,  -- {"length": 2000, "width": 100, "height": 25}
    calculated_volume DECIMAL(8,4),  -- ‚Üê –ó–î–ï–°–¨ –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø –†–ï–ó–£–õ–¨–¢–ê–¢
    quantity INT,
    ...
);
```

---

## üìä –ü–û–®–ê–ì–û–í–´–ô –ü–†–ò–ú–ï–†

### –í—ã —Å–æ–∑–¥–∞—ë—Ç–µ —Ç–æ–≤–∞—Ä:

```
1. –í—ã–±–∏—Ä–∞–µ—Ç–µ –®–∞–±–ª–æ–Ω: "–î–æ—Å–∫–∞"
   ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ñ–æ—Ä–º—É–ª–∞: "length * width * height / 1000000"
   ‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ–ª—è: length, width, height

2. –í–≤–æ–¥–∏—Ç–µ: length = 2000 –º–º
   ‚Üí calculated_volume = "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è..."
   ‚Üí –í—ã–∑—ã–≤–∞–µ—Ç—Å—è: testFormula({length: 2000})
   ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: –û–®–ò–ë–ö–ê (–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç width, height)

3. –í–≤–æ–¥–∏—Ç–µ: width = 100 –º–º
   ‚Üí calculated_volume = "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è..."
   ‚Üí –í—ã–∑—ã–≤–∞–µ—Ç—Å—è: testFormula({length: 2000, width: 100})
   ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: –û–®–ò–ë–ö–ê (–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç height)

4. –í–≤–æ–¥–∏—Ç–µ: height = 25 –º–º
   ‚Üí calculated_volume = 5.0000 ‚úì
   ‚Üí –í—ã–∑—ã–≤–∞–µ—Ç—Å—è: testFormula({length: 2000, width: 100, height: 25})
   ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: SUCCESS! (5)

5. –ù–∞–∂–∏–º–∞–µ—Ç–µ –°–û–•–†–ê–ù–ò–¢–¨
   ‚Üí CreateProduct::mutateFormDataBeforeCreate()
   ‚Üí –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç: testFormula({length: 2000, width: 100, height: 25}) ‚Üí 5
   ‚Üí INSERT INTO products (calculated_volume: 5.0000, ...)
   ‚Üí –¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω! ‚úì
```

---

## üßÆ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ testFormula()

```php
// –í–´ –í–´–ó–´–í–ê–ï–¢–ï:
$template->testFormula([
    'length' => 2000,
    'width' => 100,
    'height' => 25
]);

// –í–ù–£–¢–†–ò –§–£–ù–ö–¶–ò–ò:
// 1. –ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—É–ª—ã
//    "length * width * height / 1000000"
//    ‚Üí ['length', 'width', 'height']

// 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ –≤—Å–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
//    ‚úì length = 2000
//    ‚úì width = 100
//    ‚úì height = 25

// 3. –ü–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è
//    "2000 * 100 * 25 / 1000000"

// 4. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç
//    2000 * 100 = 200 000
//    200 000 * 25 = 5 000 000
//    5 000 000 / 1 000 000 = 5.0

// 5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç
// [
//     'success' => true,
//     'error' => null,
//     'result' => 5.0
// ]
```

---

## üí° –í–ê–ñ–ù–´–ï –î–ï–¢–ê–õ–ò

### –ê—Ç—Ä–∏–±—É—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ JSON

```php
// –í –ë–î –≤ —Ç–∞–±–ª–∏—Ü–µ products:
$product->attributes; // –ú–∞—Å—Å–∏–≤, –Ω–æ –≤ –ë–î –∫–∞–∫ JSON

// –ö–æ–≥–¥–∞ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Ç–æ–≤–∞—Ä:
$product = Product::find(1);
$product->attributes; // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤
// ['length' => 2000, 'width' => 100, 'height' => 25]
```

### calculated_volume ‚Äî —ç—Ç–æ –∑–∞ –û–î–ù–£ –µ–¥–∏–Ω–∏—Ü—É

```php
// –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–±—ä–µ–º –∑–∞ 1 –µ–¥–∏–Ω–∏—Ü—É
$product->calculated_volume; // 5.0000 (–∑–∞ 1 —à—Ç—É–∫—É)

// –û–±—â–∏–π –æ–±—ä–µ–º = calculated_volume * quantity
$product->getTotalVolume(); // 5.0000 * 100 = 500.0000 –º¬≥
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏—è

```php
// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 999999999.9999 (decimal(15,4))
if ($calculated_volume > 999999999.9999) {
    // –û—à–∏–±–∫–∞: –∑–Ω–∞—á–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ
    $set('calculated_volume', '–û–±—ä–µ–º –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ');
}
```

---

## üéØ –ß–¢–û –ù–£–ñ–ù–û –ó–ù–ê–¢–¨ –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–£

### –ï—Å–ª–∏ –∏–∑–º–µ–Ω—è–µ—Ç–µ —Ñ–æ—Ä–º—É–ª—É –≤ —à–∞–±–ª–æ–Ω–µ:

```php
// –î–û: "length * width * height / 1000000"
// –ü–û–°–õ–ï: "length * width * height * 0.000001"

// –°—Ç–∞—Ä—ã–µ —Ç–æ–≤–∞—Ä—ã —Å —ç—Ç–∏–º —à–∞–±–ª–æ–Ω–æ–º:
// - –ù–ï –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// - –ò—Ö calculated_volume –æ—Å—Ç–∞—ë—Ç—Å—è —Å—Ç–∞—Ä—ã–º
// - –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ ‚Üí –ø–µ—Ä–µ—Å—á–µ—Ç ‚Üí –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

### –ï—Å–ª–∏ —Å–æ–∑–¥–∞—ë—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä:

```php
// 1. –í—ã–±–∏—Ä–∞–µ—Ç–µ —à–∞–±–ª–æ–Ω
// 2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
// 3. calculated_volume —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// 4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ ‚Üí calculated_volume —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î

// –ë–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ!
```

### –ï—Å–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç–µ —Ç–æ–≤–∞—Ä:

```php
// 1. –ò–∑–º–µ–Ω—è–µ—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
// 2. calculated_volume –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// 3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ ‚Üí –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Ç–æ–≤–∞—Ä—ã:

```php
// –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–µ–ª–∞–π—Ç–µ UPDATE –Ω–∞–ø—Ä—è–º—É—é!
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ –º–æ–¥–µ–ª–∏:

Product::find(1)->updateCalculatedVolume();
// –∏–ª–∏
$product = Product::find(1);
$product->updateCalculatedVolume(); // –ü–µ—Ä–µ—Å—á–µ—Ç + —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
```

---

## üöÄ –§–ê–ô–õ–´, –ì–î–ï –ü–†–û–ò–°–•–û–î–ò–¢ –ú–ê–ì–ò–Ø

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∞ | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç |
|------|--------|---|
| ProductResource.php | 123 | –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª–µ–π |
| ProductResource.php | 152 | –ò–∑–º–µ–Ω–µ–Ω–∏–µ quantity ‚Üí –ø–µ—Ä–µ—Å—á–µ—Ç |
| ProductResource.php | 268 | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ ‚Üí –ø–µ—Ä–µ—Å—á–µ—Ç |
| ProductResource.php | 607 | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ calculated_volume |
| ProductTemplate.php | 68 | testFormula() ‚Äî –≥–ª–∞–≤–Ω—ã–π —Ä–∞—Å—á–µ—Ç |
| ProductTemplate.php | 145 | extractVariablesFromFormula() |
| ProductTemplate.php | 167 | evaluateExpression() |
| ProductTemplate.php | 196 | parseExpression() ‚Äî –ø–∞—Ä—Å–µ—Ä |
| CreateProduct.php | 17 | mutateFormDataBeforeCreate() |
| CreateProduct.php | 59 | –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º |
| EditProduct.php | 21 | mutateFormDataBeforeSave() |
| EditProduct.php | 46 | –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ |
| Product.php | 161 | setCalculatedVolumeAttribute() ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| Product.php | 336 | calculateVolume() ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ |
| Product.php | 385 | updateCalculatedVolume() ‚Äî –ø–µ—Ä–µ—Å—á–µ—Ç + —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ |
| Product.php | 395 | getTotalVolume() ‚Äî total_volume = cv * qty |

---

## üìå –ó–ê–ü–û–ú–ù–ò–¢–ï

```
–í–•–û–î:
  –®–∞–±–ª–æ–Ω —Å —Ñ–æ—Ä–º—É–ª–æ–π: "length * width * height / 1000000"
  –ê—Ç—Ä–∏–±—É—Ç—ã —Ç–æ–≤–∞—Ä–∞: {length: 2000, width: 100, height: 25}

–ü–†–û–¶–ï–°–°:
  ProductTemplate::testFormula($attributes)
  ‚Üí –ü–æ–¥—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º—É–ª—É
  ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å
  ‚Üí –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–í–´–•–û–î:
  calculated_volume: 5.0000 –º¬≥ (–∑–∞ 1 –µ–¥–∏–Ω–∏—Ü—É)
  
–°–û–•–†–ê–ù–ï–ù–ò–ï:
  INSERT INTO products (calculated_volume: 5.0000, ...)
  
–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:
  total_volume = 5.0000 * quantity
  total_volume = 5.0000 * 100 = 500 –º¬≥
```

---

## ‚ùì –ß–ê–°–¢–´–ï –í–û–ü–†–û–°–´

### Q: –ì–¥–µ —è –≤–∏–∂—É calculated_volume?
A: –í —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –∫–∞–∫ "–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π –æ–±—ä–µ–º" (disabled –ø–æ–ª–µ)

### Q: –ü–æ—á–µ–º—É calculated_volume —Ä–∞–≤–µ–Ω null?
A: –ü–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### Q: –ú–æ–∂–µ—Ç –ª–∏ —è –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å calculated_volume?
A: –ù–µ—Ç, —ç—Ç–æ disabled –ø–æ–ª–µ. –û–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### Q: –ö–∞–∫ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å calculated_volume –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ —Ç–æ–≤–∞—Ä–∞?
A: –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–æ–≤–∞—Ä –≤ —Ñ–æ—Ä–º–µ, –∏–∑–º–µ–Ω–∏—Ç–µ—Å—å –ª—é–±–æ–µ –ø–æ–ª–µ (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ) ‚Üí –ø–µ—Ä–µ—Å—á–µ—Ç

### Q: –ß—Ç–æ –µ—Å–ª–∏ —è –º–µ–Ω—è—é —Ñ–æ—Ä–º—É–ª—É –≤ —à–∞–±–ª–æ–Ω–µ?
A: –ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Ñ–æ—Ä–º—É–ª—É. –°—Ç–∞—Ä—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é.

### Q: –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –æ–±—â–∏–π –æ–±—ä–µ–º?
A: `total_volume = calculated_volume * quantity`

---

## üé¨ –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –°–û–ë–´–¢–ò–ô

```
–°–û–ó–î–ê–ù–ò–ï –¢–û–í–ê–†–ê:
  1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É
  2. –í—ã–±—Ä–∞—Ç—å —à–∞–±–ª–æ–Ω
  3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
  4. –ù–∞–∂–∞—Ç—å –°–û–•–†–ê–ù–ò–¢–¨
  5. CreateProduct::mutateFormDataBeforeCreate()
     ‚îî‚îÄ testFormula()
     ‚îî‚îÄ data['calculated_volume'] = result
  6. Product::create($data)
  7. –¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω —Å calculated_volume ‚úì

–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –¢–û–í–ê–†–ê:
  1. –û—Ç–∫—Ä—ã—Ç—å —Ç–æ–≤–∞—Ä –≤ —Ñ–æ—Ä–º–µ
  2. –ò–∑–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É
  3. calculated_volume –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è (live)
  4. –ù–∞–∂–∞—Ç—å –°–û–•–†–ê–ù–ò–¢–¨
  5. EditProduct::mutateFormDataBeforeSave()
     ‚îî‚îÄ testFormula()
     ‚îî‚îÄ data['calculated_volume'] = result
  6. $product->update($data)
  7. calculated_volume –æ–±–Ω–æ–≤–ª—ë–Ω ‚úì
```

---

## üéì –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**calculated_volume** ‚Äî —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç, –∫–æ—Ç–æ—Ä—ã–π:
- ‚úÖ –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ real-time –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º—ã
- ‚úÖ –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ñ–æ—Ä–º—É–ª–µ –∏–∑ —à–∞–±–ª–æ–Ω–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤–≤–µ–¥—ë–Ω–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –æ–±—â–∏—Ö –æ–±—ä—ë–º–æ–≤
- ‚úÖ –ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω—ë–Ω –≤—Ä—É—á–Ω—É—é

**–í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ–± —ç—Ç–æ–º ‚Äî —Å–∏—Å—Ç–µ–º–∞ –≤—Å—ë –¥–µ–ª–∞–µ—Ç —Å–∞–º–∞!** üöÄ

